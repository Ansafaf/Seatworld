<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Wishlist - SeatWorld</title>
  <link rel="stylesheet" href="/css/users/wishlist.css">
</head>

<body>
  <%- include('../partials/header', { user: user || {}, cartCount: cartCount || 0, showSearch: false }) %>

    <%- include('../partials/flash') %>

      <!-- WISHLIST -->
      <div class="wishlist">
        <h2>WISHLIST</h2>
        <table>
          <thead>
            <tr>
              <th>Product</th>
              <th>Details</th>
              <th>Price</th>
            </tr>
          </thead>
          <tbody>
            <% if (wishlist && wishlist.length> 0) { %>
              <% wishlist.forEach(item=> { %>
                <tr>
                  <td>
                    <img src="<%= item.image %>" alt="<%= item.name %>">
                    <a href="/wishlist/remove/<%= item._id %>" class="remove">Remove</a>
                  </td>
                  <td>
                    <h3>
                      <%= item.name %>
                    </h3>
                    <form action="/cart/add" method="POST">
                      <input type="hidden" name="productId" value="<%= item._id %>">
                      <button class="add-to-cart">Add To Cart</button>
                    </form>
                  </td>
                  <td>â‚¹<%= item.price %>
                  </td>
                </tr>
                <% }) %>
                  <% } else { %>
                    <tr>
                      <td colspan="3" style="text-align: center; padding: 40px;">
                        <p>Your wishlist is empty</p>
                        <a href="/products" style="color: #000; text-decoration: underline;">Continue Shopping</a>
                      </td>
                    </tr>
                    <% } %>
          </tbody>
        </table>

        <% if (pagination && pagination.totalPages> 1) { %>
          <!-- PAGINATION -->
          <div class="pagination">
            <% if (pagination.currentPage> 1) { %>
              <a href="?page=<%= pagination.currentPage - 1 %>" class="pagination-btn">Previous</a>
              <% } else { %>
                <button class="pagination-btn" disabled>Previous</button>
                <% } %>

                  <% for (let i=1; i <=pagination.totalPages; i++) { %>
                    <a href="?page=<%= i %>" class="pagination-btn <%= i === pagination.currentPage ? 'active' : '' %>">
                      <%= i %>
                    </a>
                    <% } %>

                      <% if (pagination.currentPage < pagination.totalPages) { %>
                        <a href="?page=<%= pagination.currentPage + 1 %>" class="pagination-btn">Next</a>
                        <% } else { %>
                          <button class="pagination-btn" disabled>Next</button>
                          <% } %>
          </div>
          <% } %>
      </div>

      <%- include('../partials/footer') %>
</body>

</html>