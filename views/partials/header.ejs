<header class="main-header">
    <div class="header-container">
        <div class="header-left">
            <a href="/home" class="brand">
                <img src="<%= typeof logoUrl !== 'undefined' && logoUrl ? logoUrl : 'https://res.cloudinary.com/dbdnmlzy6/image/upload/v1765945540/products/rmsn314w038gnfzmemmi.jpg' %>"
                    alt="SeatWorld Logo">
                <span>SeatWorld</span>
            </a>
            <nav class="nav-menu">
                <a href="/home">Home</a>
                <a href="/products">Products</a>
                <a href="/about">About Us</a>
            </nav>
        </div>

        <div class="header-right">
            <% if (typeof showSearch !=='undefined' && showSearch) { %>
                <form action="/products" method="GET" class="header-search">
                    <div class="search-box">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" class="search-icon">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                        </svg>
                        <input type="text" name="search"
                            value="<%= (typeof filters !== 'undefined' && filters?.search) || '' %>"
                            placeholder="Search furniture...">
                    </div>
                </form>
                <% } %>

                    <div class="header-icons">
                        <a href="/wishlist" class="icon-link" title="Wishlist">
                            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z">
                                </path>
                            </svg>
                        </a>
                        <a href="/cart" class="icon-link" title="Cart">
                            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z">
                                </path>
                            </svg>
                        </a>
                        <a href="/profile" class="profile-link">
                            <img src="https://ui-avatars.com/api/?name=<%= (typeof user !== 'undefined' && (user.username || user.name)) || 'User' %>&background=random"
                                alt="Profile">
                        </a>
                    </div>

                    <button class="mobile-menu-toggle" onclick="toggleMobileNav()">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M4 6h16M4 12h16m-7 6h7"></path>
                        </svg>
                    </button>
        </div>
    </div>
</header>

<style>
    .main-header {
        background: #fff;
        border-bottom: 1px solid #e2e8f0;
        position: sticky;
        top: 0;
        z-index: 1000;
        height: 72px;
        display: flex;
        align-items: center;
    }

    .header-container {
        max-width: 1200px;
        width: 100%;
        margin: 0 auto;
        padding: 0 1.5rem;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .header-left {
        display: flex;
        align-items: center;
        gap: 2.5rem;
    }

    .brand {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        font-weight: 700;
        font-size: 1.25rem;
        color: #1e293b;
        text-decoration: none;
    }

    .brand img {
        height: 36px;
        width: auto;
    }

    .nav-menu {
        display: flex;
        gap: 1.5rem;
    }

    .nav-menu a {
        font-size: 0.9rem;
        font-weight: 500;
        color: #64748b;
        text-decoration: none;
        transition: color 0.2s;
    }

    .nav-menu a:hover {
        color: #2563eb;
    }

    .header-right {
        display: flex;
        align-items: center;
        gap: 1.5rem;
    }

    .header-search {
        width: 240px;
    }

    .search-box {
        position: relative;
    }

    .search-icon {
        position: absolute;
        left: 0.75rem;
        top: 50%;
        transform: translateY(-50%);
        width: 1.2rem;
        height: 1.2rem;
        color: #94a3b8;
    }

    .search-box input {
        width: 100%;
        padding: 0.5rem 1rem 0.5rem 2.5rem;
        border-radius: 999px;
        border: 1px solid #e2e8f0;
        background: #f1f5f9;
        font-size: 0.85rem;
        outline: none;
        transition: all 0.2s;
    }

    .search-box input:focus {
        background: #fff;
        border-color: #2563eb;
        box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
    }

    .header-icons {
        display: flex;
        align-items: center;
        gap: 1rem;
    }

    .icon-link {
        color: #64748b;
        transition: color 0.2s;
    }

    .icon-link:hover {
        color: #1e293b;
    }

    .icon-link svg {
        width: 1.5rem;
        height: 1.5rem;
    }

    .profile-link {
        width: 34px;
        height: 34px;
        border-radius: 50%;
        overflow: hidden;
        border: 2px solid #e2e8f0;
        transition: border-color 0.2s;
    }

    .profile-link:hover {
        border-color: #2563eb;
    }

    .profile-link img {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }

    .mobile-menu-toggle {
        display: none;
        background: none;
        border: none;
        color: #64748b;
        cursor: pointer;
    }

    .mobile-menu-toggle svg {
        width: 1.5rem;
        height: 1.5rem;
    }

    @media (max-width: 1024px) {
        .header-search {
            width: 180px;
        }
    }

    @media (max-width: 768px) {
        .nav-menu {
            display: none;
        }

        .header-search {
            display: none;
        }

        .mobile-menu-toggle {
            display: block;
        }
    }
</style>

<script>
    function toggleMobileNav() {
        // Implement mobile nav drawer if needed, or redirect to a mobile menu page
        console.log("Mobile menu toggled");
    }
</script>